## 📕 Chapter 05 네트워크 계층(IP)
### 📙 07 네트워크 계층 프로토콜
</br>

💡 네트워크 계층 프로토콜

    네트워크 계층 프로토콜에는 IP, ARP, ICMP, IGMP로 구성
    
    송신 측에서 수신 측으로 패킷을 전송할 때 수신 측의 네트워크까지는 IP 주소를 사용, 이후 네트워크 내에서는 MAC 주소를 사용
    즉, 패킷이 수신 측 시스템에 도착하려면 수신 측의 논리 주소뿐만 아니라 물리 주소도 알아야 함 -> ARP/RAPR 프로토콜 사용
</br>

💡 주소 변환 프로토콜(ARP)

    최종 수신지까지 패킷을 전송하기 위해서는 게이트웨이에서 수신지 IP 주소와 관련이 있는 MAC 주소를 알아야 함
    이때 논리 주소인 IP 주소를 물리 주소인 MAC 주소로 매핑하는 거이 주소 변환 프로토콜(ARP)
    
    <IP 주소와 MAC 주소 매핑 과정>
    1. 송신자는 수신자의 IP 주소를 입력해 메시지 작성
    2. ARP는 수신지 컴퓨터의 IP 주소에 해당하는 MAC 주소 값을 알아내기 위해 ARP 캐시 확인 -> 정보가 있다면 전송
    3. 정보가 없다면 게이트웨이(라우터)에서 모든 LAN 카드로 매핑된 MAC 주소를 브로드캐스팅 
       = ARP 요청 패킷(수신자의 응답을 위해 송신자의 MAC 주소 + 수신자의 IP 주소)
    4. ARP 요청 패킷을 받은 모든 수신자들은 자신의 IP 주소와 비교하여 일치하면 자신의 MAC 주소를 ARP 응답
       = ARP 요청 패킷에 담겨있는 송신자의 주소로 유니캐스트
    5. 송신자는 수신자의 MAC 주소를 자신의 ARP 캐시에 저장
       수신자의 MAC 주소로 프레임 생성, 하위 계층으로 전송 -> 물리 계층은 전기 신호로 변환해 전송
       
    이러한 ARP 송수신은 동일한 LAN 컴퓨터 끼리 수행, 즉 데이터 링크 계층으로 한정된다.
    동일한 LAN 내에서 MAC 주소를 사용해 전송하는 과정에서 IP 주소를 MAC 주소로 변환하는 과정이 필요하기 때문!
</br>

📍 MAC 주소 vs IP 주소

    MAC 주소는 IP주소와 마찬가지로 네트워크 통신에서 통신기기의 식별번호를 나타냄
    IP주소와의 차이점은 IP주소는 임시적으로 다른 주체에 의해 할당 되는 것이지만, MAC 주소는 하드웨어 자체에 부여된 고유한 식별번호 
    즉, 제품의 시리얼 넘버 라고 생각할 수 있다. 세상에 단 하나밖에 없는 유니크한 값을 가지며, 변경될 수 없다.
    
    하지만 IP 주소는 LAN 카드를 변경해도 동일한 주소를 사용할 수 있다. 
    즉, IP주소는 통신기기마다 고유하게 할당되어 있는 것이 아니라 통신사에 금액을 지불하고 받아오는 것이기 때문에 경우에 따라 바뀔 수 있음
</br>

💡 역주소 변환 프로토콜(RARP)

    물리적 주소를 알고 있을 때 IP 주소를 알아내는데 역주소 변환 프로토콜(RARP) 사용
    컴퓨터를 처음 네트워크에 연결할 때 or 디스크가 없는 컴퓨터를 부팅할 때 사용
</br>

💡 인터넷 제어 메시지 프로토콜(ICMP)
<p align="center"><img src="https://user-images.githubusercontent.com/45066381/154195225-037b4608-3239-43ce-9e43-269ec8a5cd80.jpg" width="600" height="200"/></p>

    인터넷 제어 메시지 프로토콜(ICMP)는 라우터에서 발생한 오류를 송신측으로 전송하는데 사용하는 프로토콜
    ICMP는 IP 패킷에 캡슐화 되어 인터넷으로 전송됨
</br>

💡 ICMP 질의 메시지

     1. 에코 요청 및 응답 : ping 프로토콜을 구현하는데 사용, 에코 요청 메시지에 대한 응답을 요청받는다.
     2. 타임 스탬프 요청 및 응답 : 호스트나 라우터에서 현재 날짜와 시간을 지시하는 메시지, 패킷의 왕복시간 결정
     3. 주소 마스크 요청 및 응답 : 호스트의 서브넷 마스크(& 연산으로 네트워크 주소를 알 수 있음)를 알아보는데 사용
     4. 라우터 요청 및 응답 : 자신의 네트워크에 연결된 라우터의 주소를 요청하는데 사용
</br>

💡 ICMP 오류 메시지

     1. 목적지 도달 가능 : 패킷을 최종 목적지로 전달할 수 없을 때 호스트에 목적지 도달 불가 메시지 전송
     2. 송신지 억제 : 송신지 시스템이 많은 데이터를 전송하면 전송 속도를 줄일 것을 요구
     3. 재지정 : 송신 측 노드에 적합하지 않능 경로를 설정했다고 판단하면 노드를 재지정하는 오류 메시지 전송
     4. 시간 초과 : 패킷의 라이프 타임이 0이 됐을 때 패킷을 소멸시키고 시간 초과 메시지 전송
     5. 매개변수 문제 : IP 헤더 매개변수에서 문제를 발견하면 패킷 폐기
</br>

💡 IGMP

     인터넷에 연결한 컴퓨터가 멀티캐스트 그룹을 주위의 라우터에 알릴 수 있는 수단을 제공하는 프로토콜
