## 📕 Chapter 05 네트워크 계층(IP)
### 📙 04 IPv4
</br>

💡 IP 주소란?

    네트워크에 접속한 각 컴퓨터에도 고유한 식별 번호가 있어야 데이터를 송/수신 할 수 있다.
    인터넷에 연결된 모든 컴퓨터에는 고유 주소가 부여되는데 이것이 IP 주소
</br>

💡 공인 IP 주소와 사설 IP 주소

    공인 IP 주소는 ISP가 제공한다. 현재 IPv4의 주소가 고갈되었기 때문에 인터넷에 직접 연결되는 장치(라우터 or 컴퓨터)만 공인 IP 주소 사용 
    나머지는 사설 IP 주소 할당하거나 라우터의 DHCP(IP 주소를 자동으로 할당하는 프로토콜) 기능을 사용하여 주소 할당
</br>

💡 IPv4

    ◼️ IP 주소는 2진수 32비트(=4바이트)를 10진수로 표시하여 사용한다. 이는 사람이 읽기 쉽게 하기 위함이며 실제 IP 주소는 2진수로 되어있음
      IP 주소는 8비트 크기의 빌드 4개를 모아서 구성한다. 즉, 10진수 4개로 구성(0~255 사이의 수) -> 0.0.0.0 ~ 255.255.255.255
    
    ◼️ IP 주소를 도메인 이름이라는 별칭을 사용해 쉽게 기억할 수 있다.
      도메인 이름은 인터넷에서 사용은 불가하기 때문에 도메인 이름을 IP 주소로 변환해주는 DNS 서버 필요
    
    ◼️ IP 주소는 네트워크 ID(네트워크를 구분하는 역할)와 호스트 ID(네트워크에 속한 호스트의 주소)로 구분한다.
      네트워크 아이디는 8, 16, 24비트 크기로 분류
</br>

💡 IPv4의 클래스 구조
    <p align="center"><img src="https://user-images.githubusercontent.com/45066381/153826785-ae5ced8a-1033-4ecc-a22f-b692ab7c1669.png" width="600" height="300"/></p>
    
    네트워크의 크기는 클래스 개념으로 구분 
    -> A 클래스 : 대규모 네트워크, 첫 비트가 0, 처음 8비트가 네트워크 ID 24비트가 호스트 ID    
       B 클래스 : 중형 네트워크, 첫 비트가 10, 처음 16비트가 네트워크 ID 16비트가 호스트 ID
       C 클래스 : 소규모 네트워크, 첫 비트가 110, 처음 24비트가 네트워크 ID 8비트가 호스트 ID 
       D : 멀티 캐스팅
       E : 특수 용도
       
    + 호스트 ID 비트가 네트워크 ID 보다 더 크다는 것은 그만큼 더 많은 호스트들에게 IP 주소를 할당할 수 있다는 의미(=대규모 네트워크)
</br>

💡 A 클래스

    ◼️ 네트워크 ID 8비트, 호스트 ID 24비트 사용
    ◼️ 클래스를 구별하기 위해 맨 왼쪽 비트가 0 -> 범위는 0.0.0.0 ~ 126.255.255.255 (127은 루프백 주소로 사용 X)
    ◼️ 네트워크 마스크(IP 주소와 & 연산을 했을 때 네트워크 주소를 반납, 네트워크 ID만 모두 1인 주소)는 255.0.0.0이다.
        ex) 1.1.1.2와 255.0.0.0을 &연산 하면 1.0.0.0이 되고 이 주소가 네트워크 주소, 나머지 1.1.2가 호스트 주소가 된다.
    ◼️ 네트워크 ID로 8비트를 사용하기 때문에 네트워크를 2^7(첫 번째 비트 0으로 고정)=128개 사용 가능, 이 중 모든 비트가 0 or 1인 주소는 특수 경우로 사용
    ◼️ 호스트 ID로 24비트를 사용하기 때문에 호스트는 2^24=16,777,216개로 구성, 이 중 모든 비트가 0 or 1인 주소는 특수 경우로 사용
    
    + 호스트 ID가 모두 1인 것은 브로드캐스팅 주소, 모두 0인 것은 네트워크 주소로 사용한다.
</br>

💡 B 클래스

    ◼️ 네트워크 ID 16비트, 호스트 ID 16비트 사용
    ◼️ 클래스를 구별하기 위해 맨 왼쪽 비트가 10 -> 범위는 128.0.0.0 ~ 191.255.255.255 
    ◼️ 네트워크 마스크는 255.255.0.0이다.
    ◼️ 네트워크 ID로 16비트를 사용하기 때문에 네트워크를 2^14(맨 왼쪽 비트 10으로 고정)=16384개 사용 가능
    ◼️ 호스트 ID로 16비트를 사용하기 때문에 호스트는 2^16=65,536-2 개로 구성
</br>

💡 C 클래스

    ◼️ 네트워크 ID 24비트, 호스트 ID 8비트 사용
    ◼️ 클래스를 구별하기 위해 맨 왼쪽 비트가 110 -> 범위는 192.0.0.0 ~ 223.255.255.255 
    ◼️ 네트워크 마스크는 255.255.255.0이다.
    ◼️ 네트워크 ID로 8비트를 사용하기 때문에 네트워크를 2^21(맨 왼쪽 비트 110으로 고정)개 사용 가능
    ◼️ 호스트 ID로 24비트를 사용하기 때문에 호스트는 2^8-2 개로 구성    
</br>

💡 IP 주소 범위

<p align="center"><img src="https://user-images.githubusercontent.com/45066381/154023675-33945323-3489-4da7-9f5d-754813abb38c.png" width="700" height="300"/></p>
</br>

💡 네트워크 주소와 브로드캐스트 주소

   ◼️ 컴퓨터나 라우터가 자신의 IP로 사용할 수 없는 두 개의 주소
   ◼️ 네트워크 주소는 전체 네트워크에서 작은 네트워크를 식별할때 사용되는 주소로 호스트 ID가 10진수로 0인 주소
   ◼️ 브로드캐스트 주소는 네트워크에 있는 모든 컴퓨터에 동시에 데이터를 전송할 때 사용되는 주소로 호스트 ID가 10진수로 255인 주소
     ex) IP 주소가 192.168.35.1이라면 C 클래스에 속한다는 것을 알 수 있다. 그렇다면 호스트 ID가 8비트란 것을 의미하므로 맨 뒤의 00000001에서
         모든 비트를 0으로 설정한 주소가 네트워크 주소 -> 192.168.35.0, 1로 설정한 주소가 브로트캐스팅 주소 -> 192.168.35.255 
</br>

💡 서브넷의 주소
    
    네트워크를 분할하는 것을 서브넷팅, 분할된 각 네트워크를 서브넷이라 함 
    호스트 ID 비트를 빌려 서브넷을 만든다. IP 주소는 네트워크 ID + 서브넷 ID + 호스트 ID
</br>

💡 서브넷 마스크
    
    서브넷 마스크는 서브넷팅 경우 어디까지가 네트워크 ID인지 구별하기 위해 사용 -> "/비트수"로 표시
</br>

💡 IP 프로토콜

    L3 스위치나 라우터 등의 중게 장치를 사용하여 라우팅 하는 기능을 제공
    IP는 데이터가 제대로 수신했는지 확인하는 기능이 없는 비연결형 프로토콜, 패킷을 수신지까지 전송만을 담당(전송 완료 보장 X) 
    -> 신뢰성 있는 연결은 상위 계층인 TCP/UDP가 제공
</br>

💡 IPv4 헤더
<p align="center"><img src="https://user-images.githubusercontent.com/45066381/154026991-e3d067e6-16bf-4d75-9c45-785c1932ce04.png" width="600" height="300"/></p>       

   ◼️ version : 인터넷 버전을 규정, IPv4의 버전은 4
   ◼️ header length : 헤더의 전체 길이를 4바이트 단위로 나타냄 -> 데이터의 위치를 알 수 있음
   ◼️ Type of Service : 패킷의 우선순위 + TOS 비트 + 예약 여부
      TOS 비트란 D(지연 비트), T(처리량 비트), R(신뢰성 비트), C(비용 비트)로 구성
   ◼️ Total Length : 헤더 + 데이터 길이를 정의 -> 상위 계층으로 부터 받은 데이터 길이 계산 가능
   ◼️ Identification : 데이터 전송 시 패킷이 분할될 때 각 패킷의 고유 번호 저장
   ◼️ Flag, Framgemt Offset : 패킷 재결합 시 사용하는 비트
   ◼️ Bit Time to Live : 패킷이 통과할 수 있는 최대 라우터의 수 저장
   ◼️ Protocol : 상위 계층의 프로토콜(TCP, UDP, IGMP, ICMP 등)이 무엇인지 정의
   ◼️ Header Checksum : 오류 제어를 위해 사용하는 비트 
   ◼️ Source IP Address : 송신지의 IP 주소 정의, 변하지 않음
   ◼️ Destination IP Address : 수신지의 IP 주소 정의, 변하지 않음
